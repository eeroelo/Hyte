import"./style-Du0J5Yiu.js";import{f as r}from"./fetch-CGUiTqyx.js";const g=document.querySelector(".update");g.addEventListener("click",async()=>{console.log("Klikki toimii"),r("http://localhost:3000/api/entries/1").then(n=>{console.log(n)})});const h=document.querySelector(".get_users");h.addEventListener("click",p);async function p(){console.log("Haetaa kaikki käyttäjät");const t="http://127.0.0.1:3000/api/users",e={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};r(t,e).then(o=>{k(o)})}function k(t){console.log(t);const n=document.querySelector(".tbody");n.innerHTML="",t.forEach(e=>{console.log(e.user_id,e.username,e.user_level);const o=document.createElement("tr"),s=document.createElement("td");s.innerText=e.username;const l=document.createElement("td");l.innerText=e.user_level;const i=document.createElement("td"),a=document.createElement("button");a.className="check",a.setAttribute("data-id",e.user_id),a.innerText="Info",i.appendChild(a),a.addEventListener("click",y);const u=document.createElement("td"),c=document.createElement("button");c.className="del",c.setAttribute("data-id",e.user_id),c.innerText="Delete",u.appendChild(c),c.addEventListener("click",f);var m=document.createElement("td");m.innerText=e.user_id,o.appendChild(s),o.appendChild(l),o.appendChild(i),o.appendChild(u),o.appendChild(m),n.appendChild(o)})}const d=document.querySelector(".info_dialog"),E=document.querySelector(".info_dialog button");E.addEventListener("click",()=>{d.close()});async function y(t){const n=t.target.attributes["data-id"].value;console.log("Getting individual data for ID:",n);const e=`http://127.0.0.1:3000/api/users/${n}`,s={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};r(e,s).then(l=>{console.log(l),d.showModal(),console.log("in modal"),d.querySelector("p").innerHTML=`
          <div>User ID: <span>${l.user_id}</span></div>
          <div>User Name: <span>${l.username}</span></div>
          <div>Email: <span>${l.email}</span></div>
          <div>Role: <span>${l.user_level}</span></div>
    `})}async function f(t){console.log("Deletoit tietoa"),console.log(t);const n=t.target.attributes["data-id"].value;console.log(n);const e=t.target.parentElement.nextElementSibling.textContent;console.log("Toinen tapa: ",e);const o=`http://127.0.0.1:3000/api/users/${n}`,l={method:"DELETE",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};confirm(`Oletko varma että haluat poistaa käyttäjän ID: ${n} `)&&r(o,l).then(a=>{console.log(a),p()})}async function v(){console.log("Hei täällä ollaan! Nyt pitäisi hakea käyttäjän tiedot");const t="http://localhost:3000/api/auth/me",e={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};r(t,e).then(o=>{console.log(o),document.getElementById("name").innerHTML=o.user.username})}document.querySelector(".addform").addEventListener("submit",function(t){t.preventDefault();let n=document.querySelector('input[name="fname"]').value,e=document.querySelector('input[name="password"]').value,o=document.querySelector('input[name="email"]').value;console.log("Username: "+n),console.log("Password: "+e),console.log("Email: "+o)});document.querySelector(".logout").addEventListener("click",S);function S(t){t.preventDefault(),localStorage.removeItem("token"),console.log("logginout"),window.location.href="index.html"}v();
